# =============================================================================
# Parliament Explorer - Environment Configuration Template
# =============================================================================
# Copy this file to `.env` and fill in your actual values.
# Never commit `.env` to version control (already in .gitignore).
#
# This file demonstrates all available configuration options for:
# - Database (SQLite for local, PostgreSQL for production)
# - Redis cache (optional)
# - Kafka message queue (future use)
# - API rate limiting and external services
# - Logging and monitoring
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
# Choose one configuration profile based on your environment:
# - Local development: SQLite (default, no additional setup)
# - Production: PostgreSQL (recommended for Railway, Render, etc.)
# -----------------------------------------------------------------------------

# Option 1: Local Development (SQLite) - DEFAULT
# -----------------------------------------------
# SQLite requires no additional configuration. Just uncomment if you want
# to explicitly set it (otherwise defaults are used).

# DB_DRIVER=sqlite+aiosqlite
# DB_DATABASE=parliament_explorer.db

# Option 2: Production (PostgreSQL on Railway/Render/etc.)
# ---------------------------------------------------------
# Replace these with your actual PostgreSQL credentials.
# Railway provides these as environment variables automatically.

# DB_DRIVER=postgresql+asyncpg
# DB_HOST=your-postgres-host.railway.app
# DB_PORT=5432
# DB_DATABASE=railway
# DB_USERNAME=postgres
# DB_PASSWORD=your-secure-password-here

# Database Connection Pool Settings (optional, has sensible defaults)
# DB_POOL_SIZE=5
# DB_MAX_OVERFLOW=10
# DB_POOL_TIMEOUT=30
# DB_POOL_RECYCLE=3600

# Database Query Logging (set to true for debugging)
# DB_ECHO=false
# DB_ECHO_POOL=false

# -----------------------------------------------------------------------------
# REDIS CACHE CONFIGURATION (OPTIONAL)
# -----------------------------------------------------------------------------
# Redis caching is disabled by default. Enable for production to improve
# performance for frequently accessed bills and politicians.
# -----------------------------------------------------------------------------

# REDIS_ENABLED=false

# Redis Connection (if enabled)
# REDIS_HOST=localhost
# REDIS_PORT=6379
# REDIS_DB=0
# REDIS_PASSWORD=your-redis-password  # Leave empty for no auth

# Redis Connection Pool
# REDIS_MAX_CONNECTIONS=50
# REDIS_SOCKET_TIMEOUT=5
# REDIS_SOCKET_CONNECT_TIMEOUT=5

# Cache TTL Settings (seconds)
# REDIS_DEFAULT_TTL=3600      # 1 hour
# REDIS_BILL_TTL=21600        # 6 hours
# REDIS_POLITICIAN_TTL=86400  # 24 hours

# -----------------------------------------------------------------------------
# KAFKA MESSAGE QUEUE CONFIGURATION (FUTURE USE)
# -----------------------------------------------------------------------------
# Kafka is for event-driven architecture and real-time updates.
# Currently not used but configured for future expansion.
# -----------------------------------------------------------------------------

# KAFKA_ENABLED=false
# KAFKA_BOOTSTRAP_SERVERS=localhost:9092
# KAFKA_GROUP_ID=parliament-explorer
# KAFKA_AUTO_OFFSET_RESET=earliest

# MinIO / Object Storage
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_SECURE=false
MINIO_BUCKET_RAW=parl-raw
MINIO_BUCKET_PROCESSED=parl-processed
MINIO_BUCKET_BACKUPS=backups

# Dagster
DAGSTER_HOME=/opt/dagster/dagster_home
DAGSTER_POSTGRES_HOST=localhost
DAGSTER_POSTGRES_PORT=5432
DAGSTER_POSTGRES_DB=dagster
DAGSTER_POSTGRES_USER=dagster
DAGSTER_POSTGRES_PASSWORD=dagster

# API Configuration
API_BASE_URL=http://localhost:8000
API_CORS_ORIGINS=http://localhost:3000,http://localhost:3001
API_RATE_LIMIT_ENABLED=true
API_WORKERS=4

# OpenParliament API (Canada)
OPENPARLIAMENT_API_BASE=https://api.openparliament.ca
OPENPARLIAMENT_RATE_LIMIT=100
OPENPARLIAMENT_TIMEOUT=30

# LEGISinfo Scraping
LEGISINFO_BASE_URL=https://www.parl.ca/legisinfo
LEGISINFO_RATE_LIMIT=60
LEGISINFO_USER_AGENT=ParliamentExplorer/1.0

# Hansard
HANSARD_BASE_URL=https://www.ourcommons.ca/DocumentViewer
HANSARD_RATE_LIMIT=60

# LLM / Embeddings
OPENAI_API_KEY=sk-your-key-here
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.3

# Alternative: Anthropic
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-3-sonnet-20240229

# RSS Feed Configuration
RSS_CACHE_TTL=300
RSS_MAX_ITEMS=50
RSS_REBUILD_WINDOW=12
RSS_RATE_LIMIT_IP=60
RSS_RATE_LIMIT_TOKEN=30
RSS_GLOBAL_LIMIT=1000

# Rate Limiting
RATE_LIMIT_ANONYMOUS_DAILY=600
RATE_LIMIT_BURST_PER_MIN=60
RATE_LIMIT_ENTITY_DETAIL_HOURLY=120
RATE_LIMIT_GRAPH_HOURLY=60
RATE_LIMIT_SEARCH_HOURLY=120

# Security
SECRET_KEY=your-secret-key-here-change-in-production
JWT_ALGORITHM=HS256
ALLOWED_HOSTS=localhost,127.0.0.1

# Monitoring
SENTRY_DSN=
LOG_LEVEL=INFO
ENABLE_METRICS=true
METRICS_PORT=9090

# Feature Flags
ENABLE_GRAPHQL=true
ENABLE_RSS_FEEDS=true
ENABLE_PERSONALIZATION=true
DEFAULT_JURISDICTION=ca-federal

# Timezone
TZ=America/Toronto

# =============================================================================
# CURRENTLY IMPLEMENTED CONFIGURATION (as of v0.2.0)
# =============================================================================
# The above variables are planned for future features. The current implementation
# uses a simpler Pydantic Settings-based configuration from src/config.py.
#
# Actively used environment variables (see src/config.py):
# -----------------------------------------------------------------------------
# 
# DATABASE (DatabaseConfig):
#   DB_DRIVER=sqlite+aiosqlite (or postgresql+asyncpg for production)
#   DB_HOST, DB_PORT, DB_DATABASE, DB_USERNAME, DB_PASSWORD
#   DB_POOL_SIZE, DB_MAX_OVERFLOW, DB_POOL_TIMEOUT, DB_POOL_RECYCLE
#   DB_ECHO, DB_ECHO_POOL
#
# REDIS (RedisConfig):
#   REDIS_ENABLED, REDIS_HOST, REDIS_PORT, REDIS_DB, REDIS_PASSWORD
#   REDIS_MAX_CONNECTIONS, REDIS_SOCKET_TIMEOUT, REDIS_SOCKET_CONNECT_TIMEOUT
#   REDIS_DEFAULT_TTL, REDIS_BILL_TTL, REDIS_POLITICIAN_TTL
#
# KAFKA (KafkaConfig):
#   KAFKA_ENABLED, KAFKA_BOOTSTRAP_SERVERS, KAFKA_GROUP_ID, KAFKA_AUTO_OFFSET_RESET
#
# See .env.example above for detailed descriptions and example values.
# =============================================================================

# =============================================================================
# IMPORTANT SECURITY NOTES
# =============================================================================
# 1. **Never commit `.env` files** with real credentials to version control.
# 2. Use **strong passwords** for database and Redis in production.
# 3. Enable **SSL/TLS** for PostgreSQL and Redis connections in production.
# 4. Use **environment-specific credentials** (different for dev/staging/prod).
# 5. Rotate passwords regularly and use secrets managers (e.g., Railway vars).
# 6. Review Railway's "Service Variables" for auto-provided database URLs.
# =============================================================================
